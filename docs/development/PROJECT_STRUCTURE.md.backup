# ğŸ—‚ï¸ MarkPDFDown - Project Structure

```mermaid
graph TD
    A[ğŸ“ markpdfdown/] --> B[ğŸ”§ config.py]
    A --> C[ğŸ“ src/]
    A --> D[ğŸ“ docs/]
    A --> E[ğŸ“ tests/]
    A --> F[ğŸ“ tools/]
    A --> G[ğŸš€ launcher.py]
    
    C --> H[ğŸ“ core/]
    C --> I[ğŸ“ batch/]
    C --> J[ğŸ“ scripts/]
    C --> K[ğŸ“ utils/]
    
    D --> L[ğŸ“ guides/]
    D --> M[ğŸ“ security/]
    D --> N[ğŸ“ development/]
    D --> O[ğŸ“ legal/]
    
    style B fill:#4CAF50
    style G fill:#FF9800
    style C fill:#2196F3
    style D fill:#9C27B0
```

## ğŸ“ Current Project Organization

This project follows enterprise-grade organization principles with **Single Source of Truth (SSOT) Configuration** at its core:

```
markpdfdown/
â”œâ”€â”€ ğŸ”§ config.py                     # â­ SSOT Configuration System
â”œâ”€â”€ ğŸ”’ .env                          # Environment variables (DO NOT COMMIT)
â”œâ”€â”€ ğŸ“‹ .env.template                 # Template for .env file
â”œâ”€â”€ ğŸš€ launcher.py                   # Universal launcher script
â”œâ”€â”€ ğŸ§ª test_comprehensive.py         # Comprehensive test suite
â”œâ”€â”€ ğŸ“Š auto_batch_launcher.bat       # Windows batch launcher
â”œâ”€â”€ ğŸ“„ LICENSE                       # Apache 2.0 License
â”œâ”€â”€ ğŸ“ README.md                     # Main documentation
â”œâ”€â”€ ï¿½ pyproject.toml                # Project dependencies & config
â””â”€â”€ ğŸ”’ SECURITY_VERIFICATION_COMPLETE.md  # Security audit report
```
## ğŸ“ Source Code Structure

```mermaid
graph TB
    subgraph "Core Application"
        A[ğŸ“ src/core/] --> A1[main.py - Single file converter]
        A --> A2[main_fast.py - Fast conversion]
        A --> A3[LLMClient.py - AI interface]
    end
    
    subgraph "Batch Processing"
        B[ğŸ“ src/batch/] --> B1[auto_batch.py - Main processor]
        B --> B2[batch_api.py - OpenAI Batch API]
        B --> B3[master.py - Management]
        B --> B4[batch_convert.py - Utilities]
    end
    
    subgraph "Entry Points"
        C[ğŸ“ src/scripts/] --> C1[Entry point wrappers]
        C --> C2[Backwards compatibility]
    end
    
    subgraph "Utilities"
        D[ğŸ“ src/utils/] --> D1[conversion/ - Converters]
        D --> D2[testing/ - Test tools]
        D --> D3[optimization/ - LM Studio]
        D --> D4[switch_api.py - API switcher]
    end
```

### Core Components

| Directory | Purpose | Key Files |
|-----------|---------|-----------|
| **ğŸ“ src/core/** | Main application logic | `main.py`, `LLMClient.py` |
| **ğŸ“ src/batch/** | Batch processing system | `auto_batch.py`, `batch_api.py` |
| **ğŸ“ src/scripts/** | Entry point wrappers | Backwards compatibility |
| **ğŸ“ src/utils/** | Utility functions | Conversion, testing, optimization |

## ğŸ“š Documentation Structure

```mermaid
graph TB
    A[ğŸ“ docs/] --> B[ğŸ“ guides/]
    A --> C[ğŸ“ security/]
    A --> D[ğŸ“ development/]
    A --> E[ğŸ“ legal/]
    
    B --> B1[QUICK_START.md]
    B --> B2[AUTO_BATCH_GUIDE.md]
    B --> B3[SSOT_GUIDE.md]
    B --> B4[LM_Studio_Optimization_Guide.md]
    
    C --> C1[SECURITY.md]
    
    D --> D1[PROJECT_STRUCTURE.md]
    D --> D2[IMPLEMENTATION.md]
    D --> D3[CLI_LINTING_CONTROL.md]
    
    E --> E1[CONTRIBUTORS.md]
    E --> E2[COPYRIGHT]
```

| Documentation Type | Location | Purpose |
|-------------------|----------|---------|
| **ğŸ“š User Guides** | `docs/guides/` | How-to guides for users |
| **ğŸ”’ Security** | `docs/security/` | Security policies and procedures |
| **ğŸ› ï¸ Development** | `docs/development/` | Technical documentation |
| **âš–ï¸ Legal** | `docs/legal/` | Licenses and attributions |

## ğŸ§ª Testing Structure

```mermaid
graph LR
    A[ğŸ“ tests/] --> B[ğŸ“ unit/]
    A --> C[ğŸ“ integration/]
    A --> D[ğŸ“ samples/]
    A --> E[ğŸ“ assets/]
    
    F[ğŸ§ª test_comprehensive.py] --> G[11 Test Categories]
    G --> H[100% Pass Rate]
```

| Component | Purpose | Coverage |
|-----------|---------|----------|
| **ğŸ§ª Comprehensive Suite** | `test_comprehensive.py` | Full system validation |
| **ğŸ“ Unit Tests** | `tests/unit/` | Component testing |
| **ğŸ“ Integration Tests** | `tests/integration/` | Workflow testing |
| **ğŸ“ Test Assets** | `tests/assets/` | Sample files and data |

## ğŸ› ï¸ Tools & Utilities

```mermaid
graph TD
    A[ğŸ“ tools/] --> B[ğŸ“ conversion/]
    A --> C[ğŸ“ optimization/]
    A --> D[ğŸ“ testing/]
    
    B --> B1[convert_any.py]
    B --> B2[convert_fast.py]
    
    C --> C1[optimize_lm_studio.py]
    
    D --> D1[test_openai.py]
    D --> D2[test_batch_api.py]
```

| Tool Category | Purpose | Key Features |
|---------------|---------|--------------|
| **ğŸ”„ Conversion** | File format conversion | Any-to-markdown, fast processing |
| **âš¡ Optimization** | Performance tuning | LM Studio optimization |
| **ğŸ§ª Testing** | Validation tools | API testing, batch validation |
â”‚   â”œâ”€â”€ conversion/                  # Conversion tools
â”‚   â”œâ”€â”€ optimization/                # LM Studio optimization tools
â”‚   â””â”€â”€ testing/                     # Testing tools
â”‚
â”œâ”€â”€ ğŸ“ config/                       # Configuration templates
â”‚   â”œâ”€â”€ auto_batch_config_sample.py  # Batch config template
â”‚   â””â”€â”€ templates/                   # Additional templates
â”‚ â”œâ”€â”€ README.md # Main documentation
â”‚ â”œâ”€â”€ QUICK_START.md # 30-second setup guide
â”‚ â”œâ”€â”€ AUTO_BATCH_GUIDE.md # Complete batch guide
â”‚ â”œâ”€â”€ IMPLEMENTATION.md # Technical implementation
â”‚ â”œâ”€â”€ CHANGELOG.md # Version history
â”‚ â”œâ”€â”€ LM_Studio_Optimization_Guide.md
â”‚ â”œâ”€â”€ README_zh.md # Chinese documentation
â”‚ â””â”€â”€ guides/ # Additional guides
â”‚
â”œâ”€â”€ ğŸ“ tests/ # Test files & test data
â”‚ â”œâ”€â”€ unit/ # Unit tests (future)
â”‚ â”œâ”€â”€ integration/ # Integration tests (future)
â”‚ â”œâ”€â”€ assets/ # Test assets
â”‚ â”‚ â””â”€â”€ cases/ # Test case files
â”‚ â””â”€â”€ test_util.py # Test utilities
â”‚
â”œâ”€â”€ ğŸ“ examples/ # Example files & demos
â”‚ â”œâ”€â”€ pdfs/ # Sample PDF files
â”‚ â”œâ”€â”€ demos/ # Demo images
â”‚ â”‚ â”œâ”€â”€ demo_01.png
â”‚ â”‚ â”œâ”€â”€ demo_02.png
â”‚ â”‚ â””â”€â”€ markpdfdown.png
â”‚ â””â”€â”€ outputs/ # Example outputs (future)
â”‚
â”œâ”€â”€ ğŸ“ outputs/ # Generated outputs
â”‚ â”œâ”€â”€ converted_markdown/ # Batch conversion results
â”‚ â””â”€â”€ temp/ # Temporary processing files
â”‚
â”œâ”€â”€ ğŸ“„ auto_batch.bat # Windows launcher (updated paths)
â”œâ”€â”€ ğŸ“„ pyproject.toml # Project configuration
â”œâ”€â”€ ğŸ“„ uv.lock # Dependency lock file
â”œâ”€â”€ ğŸ“„ LICENSE # Apache 2.0 License
â”œâ”€â”€ ğŸ“„ Dockerfile # Docker configuration
â””â”€â”€ ğŸ“„ Makefile # Build configuration
`
## ğŸš€ Quick Start (Updated Paths)

### Auto Batch Processing (Recommended)
```bash
# Windows users - double click:

auto_batch_launcher.bat

# All platforms:

python src/batch/auto_batch.py

# Custom folders:

python src/batch/auto_batch.py "my_pdfs" "my_output"
```
### Single File Processing
`bash
# Core application:

python core/main.py < input.pdf > output.md
python core/main_fast.py < input.pdf > output.md
`
### Utility Scripts
`bash
# Conversion utilities:

python utils/conversion/convert_any.py
python utils/conversion/convert_fast.py

# Test utilities:

python utils/testing/test_openai.py
python utils/testing/simple_llm_test.py

# LM Studio optimization:

python utils/optimization/optimize_lm_studio.py
`
## ğŸ“‹ Configuration

### Environment Setup
`bash
# Copy configuration template:

cp config/.env.sample.env

# Edit your API keys:

# OPENAI_API_KEY=sk-your-key-here
`
### Auto Batch Configuration
`bash
# Copy batch config template:

cp config/auto_batch_config_sample.py auto_batch_config.py

# Customize settings:

# DEFAULT_PDF_FOLDER = "examples/pdfs"

# DEFAULT_OUTPUT_FOLDER = "outputs/converted_markdown"
`
## ğŸ¯ Benefits of New Organization

### âœ… **Clearer Structure**

- **Core functionality** separated from utilities
- **Batch processing** has its own dedicated space
- **Documentation** centralized and comprehensive
- **Examples and outputs** clearly separated

### âœ… **Easier Navigation**

- **Logical grouping** of related functionality
- **Predictable locations** for different file types
- **Clean root directory** with minimal clutter
- **Dedicated spaces** for different purposes

### âœ… **Better Maintenance**

- **Modular organization** for easier updates
- **Clear separation** of concerns
- **Standardized structure** for team development
- **Future-proof** for additional features

### âœ… **Improved User Experience**

- **Updated batch file** with correct paths
- **Default folders** point to organized locations
- **Clear documentation** hierarchy
- **Simplified setup** process

## ğŸ”„ Migration Notes

### Updated Default Paths:

- **OLD**: `pdfs/` â†’ **NEW**: `examples/pdfs/`
- **OLD**: `converted_markdown/` â†’ **NEW**: `outputs/converted_markdown/`
- **OLD**: `docs/` scattered â†’ **NEW**: `docs/` centralized

### Import Updates:

- Batch scripts now in `batch/` folder
- Utilities organized by category in `utils/`
- Core application in `core/` folder

### Configuration Changes:

- Templates moved to `config/` folder
- Documentation centralized in `docs/`
- Examples separated from working files

## ğŸ› ï¸ Development Guidelines

### Adding New Features:

1. **Core functionality** â†’ `core/`
2. **Batch processing** â†’ `batch/`
3. **Utility scripts** â†’ `utils/[category]/`
4. **Documentation** â†’ `docs/`
5. **Test files** â†’ `tests/`

### File Organization Rules:

- **Keep root clean** - only essential files
- **Group by function** - related files together
- **Use descriptive folders** - clear purpose
- **Separate data from code** - examples vs source

- --

- *The new structure makes MarkPDFDown more professional, maintainable, and user-friendly!** ğŸ‰

For detailed usage instructions, see the [Quick Start Guide](../guides/QUICK_START.md) and [Complete Documentation](../README.md).
